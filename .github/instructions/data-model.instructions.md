# データモデル仕様

このファイルはCoffee Tasting Journalのデータモデルを定義します。

## Shop (店舗マスター)

購入店の情報を管理。豆の購入時に選択。

- **店舗名 (Shop Name)**: 店舗の名称（必須）
- **住所 (Address)**: 店舗の住所（任意）
- **URL (Website)**: 店舗のWebサイト（任意）
- **メモ (Notes)**: 営業時間や特記事項（任意）

## Dripper (ドリッパーマスター)

使用するドリッパーを管理。試飲記録時に選択。

- **ドリッパー名 (Dripper Name)**: ドリッパーの名称（必須）
- **メーカー (Manufacturer)**: メーカー名（任意）
- **URL (Product URL)**: 商品ページへのリンク（任意）
- **メモ (Notes)**: 特記事項（任意）
- **画像 (Image)**: ドリッパーの写真（任意、ファイルパスで保存）

## Filter (フィルターマスター)

使用するフィルターを管理。試飲記録時に選択。

- **フィルター名 (Filter Name)**: フィルターの名称（必須）
- **種類 (Type)**: ペーパー/金属/布など（任意）
- **URL (Product URL)**: 商品ページへのリンク（任意）
- **メモ (Notes)**: 特記事項（任意）
- **画像 (Image)**: フィルターの写真（任意、ファイルパスで保存）

## Coffee Bean (コーヒー豆マスター)

購入した豆の情報を管理。同じ豆で複数回の試飲記録を作成可能。

- **銘柄 (Bean Name)**: 商品名や農園名（必須）
- **産地 (Origin)**: 豆の産地（例: エチオピア、コロンビア）
- **焙煎度 (Roast Level)**: 8段階選択式
  - ライトロースト (Light Roast) → 浅煎り
  - シナモンロースト (Cinnamon Roast) → 浅煎り
  - ミディアムロースト (Medium Roast) → 中浅煎り
  - ハイロースト (High Roast) → 中煎り
  - シティロースト (City Roast) → 中煎り
  - フルシティロースト (Full City Roast) → 中深煎り
  - フレンチロースト (French Roast) → 深煎り
  - イタリアンロースト (Italian Roast) → 深煎り
  - ※入力は8段階、表示・フィルタリングは5段階（浅煎り/中浅煎り/中煎り/中深煎り/深煎り）にマッピング
- **精製方法 (Process)**: 選択式（任意）
  - ウォッシュド (Washed)
  - ナチュラル (Natural)
  - ハニー (Honey)
  - パルプドナチュラル (Pulped Natural)
  - セミウォッシュド (Semi-Washed)
- **デカフェ (Decaf)**: チェックボックス（デフォルト: オフ）
- **ブレンド/シングル (Blend/Single Origin)**: 選択式
  - シングルオリジン (Single Origin)
  - ブレンド (Blend)
- **メモ (Notes)**: パッケージの説明や店員のおすすめ情報など（任意、フリーテキスト）
- **購入店 (Shop)**: 店舗マスターからの外部キー参照
- **購入日 (Purchase Date)**: 購入日
- **価格 (Price)**: 購入価格（円）
- **購入量 (Amount)**: グラム数（例: 200g、500g）
- **ステータス (Status)**: 在庫中/飲み切り（デフォルト: 在庫中）
- **飲み切り日 (Finished Date)**: 飲み切った日付（任意）
- **URL (Product URL)**: 商品ページへのリンク（任意）
- **画像 (Image)**: 豆のパッケージ写真など（任意、ファイルパスで保存）

## Tasting Entry (試飲記録)

実際にコーヒーを淹れて試飲した記録。豆マスターを参照。

- **豆の参照 (Coffee Bean Reference)**: 豆マスターからの外部キー参照
- **ドリッパー (Dripper)**: ドリッパーマスターからの外部キー参照（任意）
- **フィルター (Filter)**: フィルターマスターからの外部キー参照（任意）
- **挽き方 (Grind Size)**: 数値（1.0-10.0、0.5刻み）- 富士ローヤルみるっこダイヤル準拠
- **抽出日 (Brew Date)**: 記録の作成日
- **酸味 (Acidity)**: 1-5スケール（星評価）
- **苦味 (Bitterness)**: 1-5スケール（星評価）
- **甘味 (Sweetness)**: 1-5スケール（星評価）
- **ボディ (Body)**: 軽い/中程度/重い（選択式）
- **後味 (Aftertaste)**: 1-5スケール（星評価、余韻の長さ）
- **フレーバータグ (Flavor Tags)**: 複数選択可
  - フルーツ系: ベリー、シトラス、トロピカル、ストーンフルーツ
  - ナッツ/甘味系: チョコレート、ナッツ、キャラメル、はちみつ
  - その他: フローラル、スパイス、ハーブ、アーシー
- **総合評価 (Overall Rating)**: 1-5スケール（星評価）
- **テイスティングノート (Notes)**: フリーテキスト
- **画像 (Image)**: 抽出風景やコーヒーの写真（任意、ファイルパスで保存）

## データ関連

- 1つの店舗（Shop）に対して、複数の豆（Coffee Bean）が紐づく（1対多）
- 1つの豆（Coffee Bean）に対して、複数の試飲記録（Tasting Entry）が紐づく（1対多）
- 1つのドリッパー（Dripper）に対して、複数の試飲記録が紐づく（1対多）
- 1つのフィルター（Filter）に対して、複数の試飲記録が紐づく（1対多）
- 試飲記録作成時は、既存の豆・ドリッパー・フィルターマスターから選択
- 豆登録時は、既存の店舗マスターから選択
- 各マスターは独立して管理可能

## 重要な仕様

- **試飲記録作成時の豆選択**: ステータスが「在庫中」の豆のみ表示
- **同一銘柄の扱い**: 同じ銘柄でも購入ごとに別の豆マスターレコードとして管理
- **飲み切り機能**: 豆を飲み切ったらステータスを「飲み切り」に変更（過去の試飲記録は保持）
